<!doctype html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}Ø³ÛŒØ³ØªÙ… ØªØ´Ø®ÛŒØµ Ù…Ø§ÛŒÙ†Ø± - Ø§Ø³ØªØ§Ù† Ø§ÛŒÙ„Ø§Ù…{% endblock %}
    </title>
    <link
      href="https://fonts.googleapis.com/css2?family=Vazir:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Vazir", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #2d3748;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Ù¾ÙˆØ³ØªÙ‡ Ø§ØµÙ„ÛŒ ÙˆÛŒÙ†Ø¯ÙˆØ² */
      .window-frame {
        background: #c0c0c0;
        border: 2px outset #c0c0c0;
        margin: 8px;
        height: calc(100vh - 16px);
        display: flex;
        flex-direction: column;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
      }

      /* Ù†ÙˆØ§Ø± Ø¹Ù†ÙˆØ§Ù† */
      .title-bar {
        background: linear-gradient(90deg, #0055aa 0%, #4488ff 100%);
        color: white;
        padding: 4px 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #000080;
        font-weight: bold;
        font-size: 12px;
      }

      .title-text {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .title-icon {
        width: 16px;
        height: 16px;
        background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAdgAAAHYBTnsmCAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFYSURBVDiNpZM9SwNBEIafgwQSCysrwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sLwcJCG1sL")
          no-repeat center;
        background-size: contain;
      }

      .window-controls {
        display: flex;
        gap: 2px;
      }

      .control-btn {
        width: 16px;
        height: 14px;
        background: #c0c0c0;
        border: 1px outset #c0c0c0;
        font-size: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        color: #000;
      }

      .control-btn:active {
        border: 1px inset #c0c0c0;
      }

      /* Ù†ÙˆØ§Ø± Ù…Ù†Ùˆ */
      .menu-bar {
        background: #c0c0c0;
        border-bottom: 1px solid #808080;
        display: flex;
        padding: 2px;
      }

      .menu-item {
        padding: 4px 12px;
        cursor: pointer;
        font-size: 11px;
        position: relative;
      }

      .menu-item:hover {
        background: #0055aa;
        color: white;
      }

      .menu-item.active {
        background: #0055aa;
        color: white;
      }

      /* Ù…Ù†ÙˆÛŒ Ø¢Ø¨Ø´Ø§Ø±ÛŒ */
      .dropdown-menu {
        position: absolute;
        top: 100%;
        right: 0;
        background: #c0c0c0;
        border: 2px outset #c0c0c0;
        min-width: 180px;
        display: none;
        z-index: 1000;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
      }

      .dropdown-menu.show {
        display: block;
      }

      .dropdown-item {
        padding: 6px 16px;
        cursor: pointer;
        font-size: 11px;
        border-bottom: 1px solid #808080;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .dropdown-item:hover {
        background: #0055aa;
        color: white;
      }

      .dropdown-item:last-child {
        border-bottom: none;
      }

      .dropdown-separator {
        height: 1px;
        background: #808080;
        margin: 2px 8px;
      }

      /* Ù†ÙˆØ§Ø± Ø§Ø¨Ø²Ø§Ø± */
      .toolbar {
        background: #c0c0c0;
        border-bottom: 1px solid #808080;
        padding: 4px;
        display: flex;
        gap: 2px;
        align-items: center;
        flex-wrap: wrap;
      }

      .toolbar-btn {
        width: 24px;
        height: 24px;
        background: #c0c0c0;
        border: 1px outset #c0c0c0;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
      }

      .toolbar-btn:hover {
        border: 1px outset #e0e0e0;
      }

      .toolbar-btn:active {
        border: 1px inset #c0c0c0;
      }

      .toolbar-separator {
        width: 1px;
        height: 20px;
        background: #808080;
        margin: 0 4px;
      }

      /* Ù…Ù†Ø·Ù‚Ù‡ Ù…Ø­ØªÙˆØ§ */
      .content-area {
        flex: 1;
        background: #c0c0c0;
        display: flex;
        overflow: hidden;
      }

      /* Ù¾Ù†Ù„ Ú©Ù†Ø§Ø±ÛŒ */
      .sidebar {
        width: 250px;
        background: #c0c0c0;
        border-left: 1px solid #808080;
        display: flex;
        flex-direction: column;
      }

      .sidebar-header {
        background: #e0e0e0;
        padding: 8px;
        border-bottom: 1px solid #808080;
        font-weight: bold;
        font-size: 11px;
      }

      .sidebar-content {
        flex: 1;
        padding: 8px;
        overflow-y: auto;
      }

      /* Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ */
      .main-content {
        flex: 1;
        background: white;
        margin: 2px;
        border: 1px inset #c0c0c0;
        overflow: auto;
        padding: 16px;
      }

      /* Ù†ÙˆØ§Ø± ÙˆØ¶Ø¹ÛŒØª */
      .status-bar {
        background: #c0c0c0;
        border-top: 1px solid #808080;
        height: 20px;
        display: flex;
        align-items: center;
        padding: 0 8px;
        font-size: 10px;
        gap: 16px;
      }

      .status-panel {
        border: 1px inset #c0c0c0;
        padding: 1px 6px;
        background: #f0f0f0;
      }

      /* Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øªâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ */
      .panel {
        background: #f0f0f0;
        border: 2px inset #c0c0c0;
        margin: 8px 0;
        padding: 12px;
      }

      .panel-header {
        background: #e0e0e0;
        margin: -12px -12px 8px -12px;
        padding: 6px 12px;
        border-bottom: 1px solid #808080;
        font-weight: bold;
        font-size: 12px;
      }

      /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
      .btn {
        background: #c0c0c0;
        border: 2px outset #c0c0c0;
        padding: 4px 12px;
        cursor: pointer;
        font-size: 11px;
        font-family: "Vazir", sans-serif;
        margin: 2px;
      }

      .btn:hover {
        background: #d0d0d0;
      }

      .btn:active {
        border: 2px inset #c0c0c0;
      }

      .btn-primary {
        background: #0055aa;
        color: white;
        border: 2px outset #0055aa;
      }

      .btn-primary:hover {
        background: #0066cc;
      }

      /* ÙØ±Ù…â€ŒÙ‡Ø§ */
      .form-group {
        margin: 8px 0;
      }

      .form-label {
        display: block;
        margin-bottom: 4px;
        font-size: 11px;
        font-weight: bold;
      }

      .form-input {
        width: 100%;
        padding: 2px 4px;
        border: 1px inset #c0c0c0;
        font-size: 11px;
        font-family: "Vazir", sans-serif;
      }

      .form-select {
        width: 100%;
        padding: 2px;
        border: 1px inset #c0c0c0;
        font-size: 11px;
        font-family: "Vazir", sans-serif;
        background: white;
      }

      /* Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ */
      .icon {
        width: 16px;
        height: 16px;
        display: inline-block;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
      }

      .icon-scan {
        background-color: #ff6b6b;
      }
      .icon-network {
        background-color: #4ecdc4;
      }
      .icon-monitor {
        background-color: #45b7d1;
      }
      .icon-report {
        background-color: #96ceb4;
      }
      .icon-settings {
        background-color: #ffeaa7;
      }
      .icon-help {
        background-color: #dda0dd;
      }

      /* ØªØ¨â€ŒÙ‡Ø§ */
      .tab-container {
        border: 1px solid #808080;
        margin: 8px 0;
      }

      .tab-headers {
        background: #e0e0e0;
        display: flex;
        border-bottom: 1px solid #808080;
      }

      .tab-header {
        padding: 6px 16px;
        cursor: pointer;
        font-size: 11px;
        border-right: 1px solid #808080;
        background: #c0c0c0;
      }

      .tab-header:last-child {
        border-right: none;
      }

      .tab-header.active {
        background: white;
        border-bottom: 1px solid white;
        margin-bottom: -1px;
      }

      .tab-content {
        background: white;
        padding: 12px;
        min-height: 200px;
      }

      /* Ø¬Ø¯ÙˆÙ„ */
      .data-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 11px;
        border: 1px solid #808080;
      }

      .data-table th {
        background: #e0e0e0;
        padding: 4px 8px;
        border: 1px solid #808080;
        text-align: right;
      }

      .data-table td {
        padding: 4px 8px;
        border: 1px solid #c0c0c0;
      }

      .data-table tr:nth-child(even) {
        background: #f8f8f8;
      }

      /* Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª */
      .progress-bar {
        width: 100%;
        height: 16px;
        border: 1px inset #c0c0c0;
        background: #c0c0c0;
        position: relative;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #0055aa 0%, #4488ff 100%);
        transition: width 0.3s ease;
      }

      .progress-text {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        color: white;
        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
      }

      /* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
      @media (max-width: 768px) {
        .window-frame {
          margin: 4px;
          height: calc(100vh - 8px);
        }

        .sidebar {
          width: 200px;
        }

        .toolbar {
          flex-wrap: wrap;
        }

        .menu-bar {
          overflow-x: auto;
        }
      }

      /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .fade-in {
        animation: fadeIn 0.3s ease;
      }

      /* ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§ */
      .status-online {
        color: #28a745;
      }

      .status-offline {
        color: #dc3545;
      }

      .status-warning {
        color: #ffc107;
      }

      /* Ø¨Ø±Ø¬Ø³ØªÙ‡â€ŒØ³Ø§Ø²ÛŒ */
      .highlight {
        background: #ffff00;
        padding: 2px 4px;
      }

      .danger {
        background: #ffebee;
        color: #c62828;
        border: 1px solid #ffcdd2;
        padding: 8px;
        margin: 8px 0;
      }

      .warning {
        background: #fff8e1;
        color: #f57f17;
        border: 1px solid #ffecb3;
        padding: 8px;
        margin: 8px 0;
      }

      .success {
        background: #e8f5e8;
        color: #2e7d32;
        border: 1px solid #c8e6c9;
        padding: 8px;
        margin: 8px 0;
      }
    </style>

    {% block extra_css %}{% endblock %}
  </head>
  <body>
    <div class="window-frame">
      <!-- Ù†ÙˆØ§Ø± Ø¹Ù†ÙˆØ§Ù† -->
      <div class="title-bar">
        <div class="title-text">
          <div class="icon title-icon"></div>
          <span
            >{% block window_title %}Ø³ÛŒØ³ØªÙ… ØªØ´Ø®ÛŒØµ Ù…Ø§ÛŒÙ†Ø± Ø±Ù…Ø²Ø§Ø±Ø² - Ø§Ø³ØªØ§Ù† Ø§ÛŒÙ„Ø§Ù…{%
            endblock %}</span
          >
        </div>
        <div class="window-controls">
          <button class="control-btn" onclick="minimizeWindow()">_</button>
          <button class="control-btn" onclick="maximizeWindow()">â–¡</button>
          <button class="control-btn" onclick="closeWindow()">Ã—</button>
        </div>
      </div>

      <!-- Ù†ÙˆØ§Ø± Ù…Ù†Ùˆ -->
      <div class="menu-bar">
        <div class="menu-item" data-menu="file">
          <span>ÙØ§ÛŒÙ„</span>
          <div class="dropdown-menu">
            <div class="dropdown-item" onclick="location.href='/'">
              <span class="icon icon-scan"></span>
              ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
            </div>
            <div class="dropdown-item" onclick="location.href='/scan_history'">
              <span class="icon icon-report"></span>
              ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø§Ø³Ú©Ù†
            </div>
            <div class="dropdown-separator"></div>
            <div class="dropdown-item" onclick="exportData()">
              <span class="icon icon-report"></span>
              Ø®Ø±ÙˆØ¬ÛŒ Ú¯Ø²Ø§Ø±Ø´
            </div>
            <div class="dropdown-item" onclick="importData()">
              ğŸ“ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡
            </div>
            <div class="dropdown-separator"></div>
            <div class="dropdown-item" onclick="location.href='/logout'">
              ğŸšª Ø®Ø±ÙˆØ¬
            </div>
          </div>
        </div>

        <div class="menu-item" data-menu="tools">
          <span>Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§</span>
          <div class="dropdown-menu">
            <div class="dropdown-item" onclick="startNetworkScan()">
              <span class="icon icon-network"></span>
              Ø§Ø³Ú©Ù† Ø´Ø¨Ú©Ù‡
            </div>
            <div class="dropdown-item" onclick="startRFScan()">
              ğŸ“¡ Ø§Ø³Ú©Ù† RF/Ù…ØºÙ†Ø§Ø·ÛŒØ³ÛŒ
            </div>
            <div class="dropdown-item" onclick="startTrafficMonitor()">
              <span class="icon icon-monitor"></span>
              Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ ØªØ±Ø§ÙÛŒÚ©
            </div>
            <div class="dropdown-separator"></div>
            <div class="dropdown-item" onclick="openAIAnalysis()">
              ğŸ¤– ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ
            </div>
            <div class="dropdown-item" onclick="openGeoLocation()">
              ğŸ—ºï¸ Ù…Ú©Ø§Ù†â€ŒÛŒØ§Ø¨ÛŒ
            </div>
          </div>
        </div>

        <div class="menu-item" data-menu="view">
          <span>Ù†Ù…Ø§ÛŒØ´</span>
          <div class="dropdown-menu">
            <div class="dropdown-item" onclick="toggleSidebar()">
              ğŸ“‹ Ù¾Ù†Ù„ Ú©Ù†Ø§Ø±ÛŒ
            </div>
            <div class="dropdown-item" onclick="toggleStatusBar()">
              ğŸ“Š Ù†ÙˆØ§Ø± ÙˆØ¶Ø¹ÛŒØª
            </div>
            <div class="dropdown-item" onclick="toggleFullScreen()">
              ğŸ–¥ï¸ ØªÙ…Ø§Ù… ØµÙØ­Ù‡
            </div>
            <div class="dropdown-separator"></div>
            <div class="dropdown-item" onclick="refreshPage()">
              ğŸ”„ ØªØ§Ø²Ù‡â€ŒØ³Ø§Ø²ÛŒ
            </div>
          </div>
        </div>

        <div class="menu-item" data-menu="help">
          <span>Ø±Ø§Ù‡Ù†Ù…Ø§</span>
          <div class="dropdown-menu">
            <div class="dropdown-item" onclick="location.href='/about'">
              <span class="icon icon-help"></span>
              Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø³ÛŒØ³ØªÙ…
            </div>
            <div class="dropdown-item" onclick="showHelp()">
              ğŸ“– Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
            </div>
            <div class="dropdown-item" onclick="showKeyboardShortcuts()">
              âŒ¨ï¸ Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù…ÛŒØ§Ù†Ø¨Ø±
            </div>
            <div class="dropdown-separator"></div>
            <div class="dropdown-item" onclick="showSystemInfo()">
              â„¹ï¸ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³ÛŒØ³ØªÙ…
            </div>
          </div>
        </div>
      </div>

      <!-- Ù†ÙˆØ§Ø± Ø§Ø¨Ø²Ø§Ø± -->
      <div class="toolbar">
        <button class="toolbar-btn" onclick="goBack()" title="Ø¨Ø±Ú¯Ø´Øª">â†</button>
        <button class="toolbar-btn" onclick="goHome()" title="Ø®Ø§Ù†Ù‡">ğŸ </button>
        <button class="toolbar-btn" onclick="refreshPage()" title="ØªØ§Ø²Ù‡â€ŒØ³Ø§Ø²ÛŒ">
          ğŸ”„
        </button>

        <div class="toolbar-separator"></div>

        <button
          class="toolbar-btn"
          onclick="startQuickScan()"
          title="Ø§Ø³Ú©Ù† Ø³Ø±ÛŒØ¹"
        >
          ğŸ”
        </button>
        <button
          class="toolbar-btn"
          onclick="startMonitoring()"
          title="Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯"
        >
          ğŸ“Š
        </button>
        <button class="toolbar-btn" onclick="openMap()" title="Ù†Ù‚Ø´Ù‡">ğŸ—ºï¸</button>

        <div class="toolbar-separator"></div>

        <button class="toolbar-btn" onclick="openSettings()" title="ØªÙ†Ø¸ÛŒÙ…Ø§Øª">
          âš™ï¸
        </button>
        <button class="toolbar-btn" onclick="showHelp()" title="Ø±Ø§Ù‡Ù†Ù…Ø§">
          â“
        </button>
      </div>

      <!-- Ù…Ù†Ø·Ù‚Ù‡ Ù…Ø­ØªÙˆØ§ -->
      <div class="content-area">
        <!-- Ù¾Ù†Ù„ Ú©Ù†Ø§Ø±ÛŒ -->
        <div class="sidebar" id="sidebar">
          <div class="sidebar-header">Ú©Ù†ØªØ±Ù„ Ø³ÛŒØ³ØªÙ…</div>
          <div class="sidebar-content">
            {% block sidebar %}
            <div class="panel">
              <div class="panel-header">ğŸ“Š ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ…</div>
              <div style="font-size: 10px; line-height: 1.4">
                <div>ÙˆØ¶Ø¹ÛŒØª: <span class="status-online">Ø¢Ù†Ù„Ø§ÛŒÙ†</span></div>
                <div>CPU: <span id="cpu-usage">23%</span></div>
                <div>RAM: <span id="ram-usage">45%</span></div>
                <div>Ø´Ø¨Ú©Ù‡: <span id="network-status">ÙØ¹Ø§Ù„</span></div>
              </div>
            </div>

            <div class="panel">
              <div class="panel-header">ğŸ” Ø§Ø³Ú©Ù† Ø³Ø±ÛŒØ¹</div>
              <button
                class="btn btn-primary"
                style="width: 100%; margin: 4px 0"
                onclick="startQuickScan()"
              >
                Ø´Ø±ÙˆØ¹ Ø§Ø³Ú©Ù†
              </button>
              <div class="form-group">
                <label class="form-label">Ù…Ø­Ø¯ÙˆØ¯Ù‡ IP:</label>
                <input
                  type="text"
                  class="form-input"
                  id="quick-ip-range"
                  value="192.168.1.0/24"
                />
              </div>
            </div>

            <div class="panel">
              <div class="panel-header">ğŸ“ Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÙˆÙ‚Ø¹ÛŒØª</div>
              <div class="form-group">
                <label class="form-label">Ø§Ø³ØªØ§Ù†:</label>
                <select
                  class="form-select"
                  id="province-select"
                  onchange="updateCities()"
                >
                  <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø³ØªØ§Ù†</option>
                  <option value="ilam">Ø§ÛŒÙ„Ø§Ù…</option>
                  <option value="tehran">ØªÙ‡Ø±Ø§Ù†</option>
                  <option value="isfahan">Ø§ØµÙÙ‡Ø§Ù†</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Ø´Ù‡Ø±:</label>
                <select class="form-select" id="city-select">
                  <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ù‡Ø±</option>
                </select>
              </div>
            </div>
            {% endblock %}
          </div>
        </div>

        <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
        <div class="main-content">
          {% block content %}
          <h2>Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… ØªØ´Ø®ÛŒØµ Ù…Ø§ÛŒÙ†Ø± Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯</h2>
          <p>
            Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ Ùˆ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø±Ù…Ø²Ø§Ø±Ø² Ø·Ø±Ø§Ø­ÛŒ
            Ø´Ø¯Ù‡ Ø§Ø³Øª.
          </p>
          {% endblock %}
        </div>
      </div>

      <!-- Ù†ÙˆØ§Ø± ÙˆØ¶Ø¹ÛŒØª -->
      <div class="status-bar" id="status-bar">
        <div class="status-panel">Ø¢Ù…Ø§Ø¯Ù‡ | <span id="current-time"></span></div>
        <div class="status-panel">
          ØªØ¹Ø¯Ø§Ø¯ Ø§Ø³Ú©Ù†: <span id="scan-count">0</span>
        </div>
        <div class="status-panel">IP ÙØ¹Ø§Ù„: <span id="active-ips">0</span></div>
        <div class="status-panel">
          Ù…Ø§ÛŒÙ†Ø± Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡: <span id="detected-miners">0</span>
        </div>
        <div style="flex: 1"></div>
        <div class="status-panel">Ø·Ø±Ø§Ø­: Ø¹Ø±ÙØ§Ù† Ø±Ø¬Ø¨ÛŒ (Erfan Rajabi)</div>
      </div>
    </div>

    <script>
      // Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ù†ÙˆÙ‡Ø§ÛŒ Ø¢Ø¨Ø´Ø§Ø±ÛŒ
      document.addEventListener("DOMContentLoaded", function () {
        const menuItems = document.querySelectorAll(".menu-item");

        menuItems.forEach((item) => {
          const dropdown = item.querySelector(".dropdown-menu");

          item.addEventListener("click", function (e) {
            e.stopPropagation();

            // Ø¨Ø³ØªÙ† Ø³Ø§ÛŒØ± Ù…Ù†ÙˆÙ‡Ø§
            document.querySelectorAll(".dropdown-menu").forEach((menu) => {
              if (menu !== dropdown) {
                menu.classList.remove("show");
              }
            });

            document.querySelectorAll(".menu-item").forEach((mi) => {
              if (mi !== item) {
                mi.classList.remove("active");
              }
            });

            // ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ù…Ù†ÙˆÛŒ ÙØ¹Ù„ÛŒ
            dropdown.classList.toggle("show");
            item.classList.toggle("active");
          });
        });

        // Ø¨Ø³ØªÙ† Ù…Ù†ÙˆÙ‡Ø§ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø®Ø§Ø±Ø¬
        document.addEventListener("click", function () {
          document.querySelectorAll(".dropdown-menu").forEach((menu) => {
            menu.classList.remove("show");
          });
          document.querySelectorAll(".menu-item").forEach((item) => {
            item.classList.remove("active");
          });
        });

        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø³Ø§Ø¹Øª
        updateClock();
        setInterval(updateClock, 1000);

        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ…
        setInterval(updateSystemStatus, 5000);
      });

      // ØªÙˆØ§Ø¨Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ù†Ø¬Ø±Ù‡
      function minimizeWindow() {
        console.log("Minimize window");
      }

      function maximizeWindow() {
        const frame = document.querySelector(".window-frame");
        frame.style.margin = frame.style.margin === "0px" ? "8px" : "0px";
        frame.style.height =
          frame.style.height === "100vh" ? "calc(100vh - 16px)" : "100vh";
      }

      function closeWindow() {
        if (confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±Ø§ Ø¨Ø¨Ù†Ø¯ÛŒØ¯ØŸ")) {
          window.close();
        }
      }

      // ØªÙˆØ§Ø¨Ø¹ Ù†Ø§ÙˆØ¨Ø±ÛŒ
      function goBack() {
        window.history.back();
      }

      function goHome() {
        window.location.href = "/";
      }

      function refreshPage() {
        window.location.reload();
      }

      // ØªÙˆØ§Ø¨Ø¹ Ø¹Ù…Ù„Ú©Ø±Ø¯ÛŒ
      function startQuickScan() {
        const ipRange = document.getElementById("quick-ip-range").value;
        alert(`Ø´Ø±ÙˆØ¹ Ø§Ø³Ú©Ù† Ù…Ø­Ø¯ÙˆØ¯Ù‡: ${ipRange}`);
      }

      function startNetworkScan() {
        window.location.href = "/scan";
      }

      function startRFScan() {
        alert("Ù…Ø§Ú˜ÙˆÙ„ Ø§Ø³Ú©Ù† RF/Ù…ØºÙ†Ø§Ø·ÛŒØ³ÛŒ Ø¯Ø± Ø­Ø§Ù„ ØªÙˆØ³Ø¹Ù‡ Ø§Ø³Øª");
      }

      function startTrafficMonitor() {
        alert("Ø´Ø±ÙˆØ¹ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ ØªØ±Ø§ÙÛŒÚ©");
      }

      function startMonitoring() {
        alert("Ø´Ø±ÙˆØ¹ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø³ÛŒØ³ØªÙ…");
      }

      function openMap() {
        alert("Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù†Ù‚Ø´Ù‡");
      }

      function openSettings() {
        alert("Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ØªÙ†Ø¸ÛŒÙ…Ø§Øª");
      }

      function openAIAnalysis() {
        alert("Ù…Ø§Ú˜ÙˆÙ„ ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ");
      }

      function openGeoLocation() {
        alert("Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…Ú©Ø§Ù†â€ŒÛŒØ§Ø¨ÛŒ");
      }

      function showHelp() {
        alert("Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø³ÛŒØ³ØªÙ…");
      }

      function showKeyboardShortcuts() {
        alert(
          "Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù…ÛŒØ§Ù†Ø¨Ø±:\nCtrl+S: Ø§Ø³Ú©Ù† Ø³Ø±ÛŒØ¹\nCtrl+M: Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯\nF5: ØªØ§Ø²Ù‡â€ŒØ³Ø§Ø²ÛŒ",
        );
      }

      function showSystemInfo() {
        alert("Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³ÛŒØ³ØªÙ…:\nÙˆØ±Ú˜Ù†: 2.0\nØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡: Ø¹Ø±ÙØ§Ù† Ø±Ø¬Ø¨ÛŒ");
      }

      function exportData() {
        alert("Ø®Ø±ÙˆØ¬ÛŒ Ú¯Ø²Ø§Ø±Ø´");
      }

      function importData() {
        alert("ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡");
      }

      function toggleSidebar() {
        const sidebar = document.getElementById("sidebar");
        sidebar.style.display =
          sidebar.style.display === "none" ? "flex" : "none";
      }

      function toggleStatusBar() {
        const statusBar = document.getElementById("status-bar");
        statusBar.style.display =
          statusBar.style.display === "none" ? "flex" : "none";
      }

      function toggleFullScreen() {
        if (!document.fullscreenElement) {
          document.documentElement.requestFullscreen();
        } else {
          document.exitFullscreen();
        }
      }

      // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø³Ø§Ø¹Øª
      function updateClock() {
        const now = new Date();
        const timeString = now.toLocaleTimeString("fa-IR");
        const dateString = now.toLocaleDateString("fa-IR");
        document.getElementById("current-time").textContent =
          `${timeString} - ${dateString}`;
      }

      // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ…
      function updateSystemStatus() {
        document.getElementById("cpu-usage").textContent =
          Math.floor(Math.random() * 50 + 10) + "%";
        document.getElementById("ram-usage").textContent =
          Math.floor(Math.random() * 30 + 30) + "%";
      }

      // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ù‡Ø±Ù‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ø³ØªØ§Ù†
      function updateCities() {
        const province = document.getElementById("province-select").value;
        const citySelect = document.getElementById("city-select");

        const cities = {
          ilam: [
            "Ø§ÛŒÙ„Ø§Ù…",
            "Ø§ÛŒÙˆØ§Ù†",
            "Ø¯Ø±Ù‡â€ŒØ´Ù‡Ø±",
            "Ø¯Ù‡Ù„Ø±Ø§Ù†",
            "Ø¢Ø¨Ø¯Ø§Ù†Ø§Ù†",
            "Ù…Ù‡Ø±Ø§Ù†",
            "Ù…Ù„Ú©Ø´Ø§Ù‡ÛŒ",
            "Ø³Ø±Ø§Ø¨Ù„Ù‡",
            "Ú†Ø±Ø¯Ø§ÙˆÙ„",
            "Ø´ÛŒØ±ÙˆØ§Ù† Ùˆ Ú†Ø±Ø¯Ø§ÙˆÙ„",
          ],
          tehran: ["ØªÙ‡Ø±Ø§Ù†", "Ø±ÛŒ", "Ø´Ù…ÛŒØ±Ø§Ù†Ø§Øª", "Ø§Ø³Ù„Ø§Ù…Ø´Ù‡Ø±", "Ù¾Ø§Ú©Ø¯Ø´Øª"],
          isfahan: ["Ø§ØµÙÙ‡Ø§Ù†", "Ú©Ø§Ø´Ø§Ù†", "Ù†Ø¬Ùâ€ŒØ¢Ø¨Ø§Ø¯", "Ø®Ù…ÛŒÙ†ÛŒâ€ŒØ´Ù‡Ø±", "Ø´Ø§Ù‡ÛŒÙ†â€ŒØ´Ù‡Ø±"],
        };

        citySelect.innerHTML = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ù‡Ø±</option>';

        if (province && cities[province]) {
          cities[province].forEach((city) => {
            const option = document.createElement("option");
            option.value = city;
            option.textContent = city;
            citySelect.appendChild(option);
          });
        }
      }

      // Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù…ÛŒØ§Ù†Ø¨Ø±
      document.addEventListener("keydown", function (e) {
        if (e.ctrlKey) {
          switch (e.key) {
            case "s":
              e.preventDefault();
              startQuickScan();
              break;
            case "m":
              e.preventDefault();
              startMonitoring();
              break;
          }
        }
      });
    </script>

    {% block extra_js %}{% endblock %}
  </body>
</html>
